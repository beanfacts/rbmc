<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript">
            
            // define location of server
            var url = "ws://localhost:8765"

            // open websockets connection to the server specified
            var exampleSocket = new WebSocket(url, "bmcon");
            
            // wait for the connection to be established
            exampleSocket.onopen = function() {
                
                // send data on every keystroke
                document.addEventListener('keydown', function(event) {
                    d = {"key": event.keyCode, "etc": "whatever"};
                    d = JSON.stringify(d);
                    exampleSocket.send(d);
                    console.log(event.key + " sent.");
                });

            };

            exampleSocket.onerror = function () {
                alert("Lost connection to " + url)
            }

    </script>
        </script>
    </head>

    <body>
        <p>See console output (Inspect Element)</p>
    </body>

</html>